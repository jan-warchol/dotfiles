// polish qwerty adapted to my hardware setup, with some customizations

default
xkb_symbols "basic" {
    include "pc"
    include "pl(basic)"

    // put parentheses on the same keys as brackets
    key <AD11> { [ NoSymbol, NoSymbol, parenleft ] };
    key <AD12> { [ NoSymbol, NoSymbol, parenright ] };

    // move + to a closer key
    key <LatP> { [ NoSymbol, NoSymbol, plus ] };

    // move quotes so that <AC11> key can be used for shift
    key <AC10> { [ NoSymbol, NoSymbol, apostrophe, quotedbl ] };

    include "level3(ralt_switch)"
};

xkb_symbols "modifiers" {
    include "janek(basic)"

    // Shift keys. Pressing them both toggles Caps_Lock.
    key <CAPS> {
        type[Group1]="TWO_LEVEL",
        symbols[Group1] = [ Shift_L, Caps_Lock ]
    };
    // WTF Shift_R doesn't work properly - if I define this key like this:
    //     type[Group1]="TWO_LEVEL",
    //     symbols[Group1] = [ Shift_R, Caps_Lock ]
    // then right shift only works when Caps_Lock is on...
    key <AC11> {
        type[Group1]="TWO_LEVEL",
        symbols[Group1] = [ Shift_L, Caps_Lock ]
    };
};

xkb_symbols "navigation" {
    include "janek(modifiers)"

    // put arrows on right hand home keys, in second group (vim-style)
    key <LatJ> {
        symbols[Group2] = [ Left, Left, Home ]
    };
    key <LatK> {
        symbols[Group2] = [ Down, Down, Next ]
    };
    key <LatL> {
        symbols[Group2] = [ Up, Up, Prior ]
    };
    key <AC10> {
        symbols[Group2] = [ Right, Right, End ]
    };

    // Switch groups to enable/disable arrows.
    // I also use xcape to map this to more accessible keys.
    key <LFSH> { [ ISO_Last_Group ] };
    key <RTSH> { [ ISO_First_Group ] };

    // Home key doesn't work on my keyboard, so I need another one
    key <FK12> { [ Home, Home, F12 ] };

    // backward/forward keys can be PgUp/PgDown, as usual on ThinkPads
    key <BACK> { [ Prior ] };
    key <FRWD> { [ Next ] };
};
