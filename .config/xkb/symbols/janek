default
xkb_symbols "basic" {
    include "pc"

    key <TLDE> { [ grave, asciitilde ] };
    key <AE01> { [ 1, exclam ] };
    key <AE02> { [ 2, at ] };
    key <AE03> { [ 3, numbersign ] };
    key <AE04> { [ 4, dollar ] };
    key <AE05> { [ 5, percent ] };
    key <AE06> { [ 6, asciicircum ] };
    key <AE07> { [ 7, ampersand ] };
    key <AE08> { [ 8, asterisk ] };
    key <AE09> { [ BackSpace, BackSpace, colon ] };
    key <AE10> { [ 0 ] };
    key <AE11> { [ minus, underscore ] };
    key <AE12> { [ equal, plus ] };

    key <LatQ> { [ q, Q ] };
    key <LatW> { [ w, W ] };
    key <LatE> { [ d, D ] };
    key <LatR> { [ f, F ] };
    key <LatT> { [ comma, less ] };
    key <LatY> { [  ] };
    key <LatU> { [ u, U ] };
    key <LatI> { [ i, I ] };
    key <LatO> { [ o, O, oacute, Oacute ] };
    key <LatP> { [ j, J, plus ] };
    key <AD11> { [ bracketleft, braceleft, parenleft ] };
    key <AD12> { [ bracketright, braceright, parenright ] };
    key <BKSL> { [  ] };

    key <LatA> { [ a, A, aogonek, Aogonek ] };
    key <LatS> { [ s, S, sacute, Sacute ] };
    key <LatD> { [ e, E, eogonek, Eogonek ] };
    key <LatF> { [ t, T ] };
    key <LatG> { [ g, G ] };
    key <LatH> { [ y, Y ] };
    key <LatJ> { [ n, N ] };
    key <LatK> { [ r, R ] };
    key <LatL> { [ l, L, lstroke, Lstroke ] };
    key <AC10> { [ h, H, apostrophe, quotedbl ] };

    key <LatZ> { [ z, Z, zabovedot, Zabovedot ] };
    key <LatX> { [ x, X, zacute, Zacute ] };
    key <LatC> { [ c, C, cacute, Cacute ] };
    key <LatV> { [ v, V ] };
    key <LatB> { [ b, B ] };
    key <LatN> { [ p, P, nacute, Nacute ] };
    key <LatM> { [ m, M, backslash ] };
    key <AB08> { [ k, K ] };
    key <AB09> { [ period, greater, semicolon ] };
    key <AB10> { [ slash, bar, question ] };

    key <MENU> { [ Return ] };
    key <BKSP> { [  ] };
    key <RTRN> { [  ] };

    // replacement keys
    key <FK10> { [ 9, F10 ] };

    include "level3(ralt_switch)"
};

xkb_symbols "modifiers" {
    include "janek(basic)"

    // Shift keys. Pressing them both toggles Caps_Lock.
    key <CAPS> {
        type[Group1]="TWO_LEVEL",
        symbols[Group1] = [ Shift_L, Caps_Lock ]
    };
    // WTF Shift_R doesn't work properly - if I define this key like this:
    //     type[Group1]="TWO_LEVEL",
    //     symbols[Group1] = [ Shift_R, Caps_Lock ]
    // then right shift only works when Caps_Lock is on...
    key <AC11> {
        type[Group1]="TWO_LEVEL",
        symbols[Group1] = [ Shift_L, Caps_Lock ]
    };
};

xkb_symbols "navigation" {
    include "janek(modifiers)"

    // put arrows on right hand home keys, in second group (vim-style)
    key <LatJ> {
        symbols[Group2] = [ Left, Left, Home ]
    };
    key <LatK> {
        symbols[Group2] = [ Down, Down, Next ]
    };
    key <LatL> {
        symbols[Group2] = [ Up, Up, Prior ]
    };
    key <AC10> {
        symbols[Group2] = [ Right, Right, End ]
    };

    // Switch groups to enable/disable arrows.
    // I also use xcape to map this to more accessible keys.
    key <LFSH> { [ ISO_Last_Group ] };
    key <RTSH> { [ ISO_First_Group ] };

    // Home key doesn't work on my keyboard, so I need another one
    key <FK12> { [ Home, Home, F12 ] };

    // backward/forward keys can be PgUp/PgDown, as usual on ThinkPads
    key <BACK> { [ Prior ] };
    key <FRWD> { [ Next ] };
};
