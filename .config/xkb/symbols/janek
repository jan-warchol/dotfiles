// polish qwerty adapted to my hardware setup, with some customizations

default
xkb_symbols "basic" {
    include "pc"
    include "pl(basic)"

    // put parentheses on the same keys as brackets
    key <AD11> { [ NoSymbol, NoSymbol, parenleft ] };
    key <AD12> { [ NoSymbol, NoSymbol, parenright ] };

    // move + to a closer key
    key <LatP> { [ NoSymbol, NoSymbol, plus ] };

    // move quotes so that <AC11> key can be used for shift
    key <AC10> { [ NoSymbol, NoSymbol, apostrophe, quotedbl ] };

    include "level3(ralt_switch)"
};

xkb_symbols "modifiers" {
    include "janek(basic)"

    // Shift keys. Pressing them both toggles Caps_Lock.
    key <CAPS> {
        type[Group1]="TWO_LEVEL",
        symbols[Group1] = [ Shift_L, Caps_Lock ]
    };
    // WTF Shift_R doesn't work properly - if I define this key like this:
    //     type[Group1]="TWO_LEVEL",
    //     symbols[Group1] = [ Shift_R, Caps_Lock ]
    // then right shift only works when Caps_Lock is on...
    key <AC11> {
        type[Group1]="TWO_LEVEL",
        symbols[Group1] = [ Shift_L, Caps_Lock ]
    };
};

xkb_symbols "navigation" {
    include "janek(modifiers)"

    // put arrows on 0 - F12 =
    key <AE10> { [ Left, Left, Home, Home ] };
    key <AE11> { [ Down, Down, Next, Next ] };
    key <FK12> { [ Up, Up, Prior, Prior ] };
    key <AE12> { [ Right, Right, End, End ] };

    // it also makes sense to have Home and End close to arrows
    key <FK11> { [ Home, Home, F11 ] };
    key <END>  { [ End, End ] };

    // replacement keys for 0 - = F11 F12
    key <FK10> { [ 0, F10 ] };
    key <MENU> { [ minus, underscore ] };
    key <FK11> { [ NoSymbol, NoSymbol, F11 ] };
    key <END>  { [ NoSymbol, NoSymbol, F12 ] };
    key <AB08> { [ NoSymbol, NoSymbol, equal ] }; // comma key

    // backward/forward keys can be PgUp/PgDown, as usual on ThinkPads
    key <BACK> { [ Prior ] };
    key <FRWD> { [ Next ] };
};
